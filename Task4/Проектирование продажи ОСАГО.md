# Проектирование продажи ОСАГО

В связи с необходимостью отображения в веб-интерфейсе информации по мере ее получения сервисом `osago-aggregator`, для интеграции фронтенд-приложения с `core-app` предлагается использовать подход Server push;

Так как количество пользователей, одновременно оформляющих заявки, может достигать двух с половиной тысяч, для обеспечения большей производительности и отказоустойчивости при интеграции `core-app` с `osago-aggregator` предлагается использовать асинхронное взаимодействие типа "точка-точка" через очередь сообщений. Вся коммуникация этих сервисов, соответственно, сводится к записи и чтении сообщений в брокер. При отображении пользователю информации о предложениях по заявке `core-app` шлет в брокер сообщение о необходимости опросить страховые компании, а `osago-aggregator` – сообщения о предложениях страховых компаний по мере их ответов. При запросе пользователя на оформление страховки `core-app` шлет в брокер сообщение о необходимости оформить страховку в выбраную пользователем страховую компанию, а `osago-aggregator` – сообщение о деталях оформленной страховки после ответа стороннего сервиса.

Поскольку предложения страховых компаний по заявкам могут изменяться, хранить их где-либо в системе после получении нет смысла – их все равно придется актуализировать, опрашивая страховые компании повторно. Информацию же об оформленных страховках можно хранить вместе с другими заявками в базе данных `core-db`, а на сервис `osago-aggregator` возложить лишь функцию коммуникации со страховыми компаниями для их опроса и оформления заявок.
